<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Calculate the Surface Under the Cumulative Ranking score of...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body><div class="container">

<table width="100%" summary="page for sucra {dmetar}"><tr><td>sucra {dmetar}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Calculate the Surface Under the Cumulative Ranking score of from a network meta-analysis</h2>

<h3>Description</h3>

<p>This function calculates the SUCRA (Surface Under the Cumulative Ranking) score from a rank
probability matrix or an object of class <code>mtc.rank.probability</code> generated by the <code><a href="../../gemtc/help/rank.probability.html">rank.probability</a></code>
function.
</p>


<h3>Usage</h3>

<pre>
sucra(x, lower.is.better = FALSE)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>An object of class <code>mtc.rank.probability</code> generated by the <code><a href="../../gemtc/help/rank.probability.html">rank.probability</a></code> function
or a matrix/data.frame in which the rows correspond to the treatment, and columns to the
probability of a specific treatment having this rank (see Details). Rownames of the matrix should
contain the name of the specific treatment.</p>
</td></tr>
<tr valign="top"><td><code>lower.is.better</code></td>
<td>
<p>Logical. Do lower (i.e., more negative) effect sizes mean that effects are
higher? <code>FALSE</code> by default. Use the default when the provided matrix already contains the
correct rank probability for each treatment, and values ought not to be inverted.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The SUCRA score is a metric to evaluate which treatment in a network is likely
to be the most efficacious in the context of network meta-analyses. The SUCRA score is calculated
in the function using the formula described in Salanti, Ades and Ioannidis (2011):
</p>
<p style="text-align: center;"><i>SUCRA_j = \frac{&sum;_{b=1}^{a-1}cum_{jb}}{a-1}</i></p>

<p>Where <i>j</i> is some treatment, <i>a</i> are all competing treatments, <i>b</i> are the
<i>b = 1, 2, ..., a-1</i> best treatments, and <i>cum</i> represents the cumulative probability
of a treatment being among the <i>b</i> best treatments.
</p>
<p>Other than an object of class <code>mtc.rank.probability</code> for argument <code>x</code>, the function can also be provided
with a <i>m \times n</i> matrix where <i>m</i> are rows corresponding to each treatment in the
network meta-analysis, and the <i>n</i> columns correspond to each rank (1st, 2nd, etc.). Rank probabilities
should be provided as a value from 0 to 1. Rownames of the matrix should correspond to the treatment names.
Here is an example rank probability matrix for eight treatments:
</p>

<table summary="Rd table">
<tr>
 <td style="text-align: left;">
. </td><td style="text-align: right;"> [,1] </td><td style="text-align: right;"> [,2] </td><td style="text-align: right;"> [,3] </td><td style="text-align: right;"> [,4] </td><td style="text-align: right;"> [,5] </td><td style="text-align: right;"> [,6] </td><td style="text-align: right;"> [,7] </td><td style="text-align: right;"> [,8]</td>
</tr>
<tr>
 <td style="text-align: left;">
CBT </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.001275 </td><td style="text-align: right;"> 0.087400 </td><td style="text-align: right;"> 0.911325</td>
</tr>
<tr>
 <td style="text-align: left;">
IPT </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.179400 </td><td style="text-align: right;"> 0.745875 </td><td style="text-align: right;"> 0.074725</td>
</tr>
<tr>
 <td style="text-align: left;">
PDT </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000225 </td><td style="text-align: right;"> 0.020300 </td><td style="text-align: right;"> 0.978025 </td><td style="text-align: right;"> 0.001450 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000</td>
</tr>
<tr>
 <td style="text-align: left;">
PLA </td><td style="text-align: right;"> 0.002825 </td><td style="text-align: right;"> 0.551175 </td><td style="text-align: right;"> 0.262525 </td><td style="text-align: right;"> 0.181550 </td><td style="text-align: right;"> 0.001925 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000</td>
</tr>
<tr>
 <td style="text-align: left;">
PST </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000025 </td><td style="text-align: right;"> 0.001450 </td><td style="text-align: right;"> 0.817850 </td><td style="text-align: right;"> 0.166725 </td><td style="text-align: right;"> 0.013950</td>
</tr>
<tr>
 <td style="text-align: left;">
SUP </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.216450 </td><td style="text-align: right;"> 0.398700 </td><td style="text-align: right;"> 0.383950 </td><td style="text-align: right;"> 0.000900 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000</td>
</tr>
<tr>
 <td style="text-align: left;">
TAU </td><td style="text-align: right;"> 0.000375 </td><td style="text-align: right;"> 0.229200 </td><td style="text-align: right;"> 0.338525 </td><td style="text-align: right;"> 0.414175 </td><td style="text-align: right;"> 0.017700 </td><td style="text-align: right;"> 0.000025 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000</td>
</tr>
<tr>
 <td style="text-align: left;">
WLC </td><td style="text-align: right;"> 0.996800 </td><td style="text-align: right;"> 0.003175 </td><td style="text-align: right;"> 0.000025 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000 </td><td style="text-align: right;"> 0.000000
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Mathias Harrer &amp; David Daniel Ebert
</p>


<h3>References</h3>

<p>Harrer, M., Cuijpers, P., Furukawa, T.A, &amp; Ebert, D. D. (2019).
<em>Doing Meta-Analysis in R: A Hands-on Guide</em>. DOI: 10.5281/zenodo.2551803.
<a href="https://bookdown.org/MathiasHarrer/Doing_Meta_Analysis_in_R/bayesian-network-meta-analysis.html">Chapter 11.2</a>.
</p>
<p>Salanti, G., Ades, A. E. &amp; Ioannidis, J.P.A. (2011). Graphical Methods and Numerical Summaries for
Presenting Results from Multiple-Treatment Meta-Analysis: An Overview and Tutorial.
<em>Journal of Clinical Epidemiology, 64</em> (2): 163â€“71.
</p>


<h3>See Also</h3>

<p><code><a href="../../dmetar/help/direct.evidence.plot.html">direct.evidence.plot</a></code>
</p>


<h3>Examples</h3>

<pre>
## Not run: 
# Example1 : conduct NMA using gemtc, calculate SUCRAs
suppressPackageStartupMessages(library(gemtc))
suppressPackageStartupMessages(library(igraph))
data("NetDataGemtc")

network = suppressWarnings(mtc.network(data.re = NetDataGemtc))

plot(network, layout = layout.fruchterman.reingold)

model = mtc.model(network, linearModel = "fixed",
                   n.chain = 4,
                   likelihood = "normal",
                   link = "identity")

mcmc = mtc.run(model, n.adapt = 5000, n.iter = 100000, thin = 10)

rp = rank.probability(mcmc)

sucra = sucra(rp, lower.is.better = TRUE)
sucra
plot(sucra)
## End(Not run)



# Example 2: construct rank proabability matrix, then use sucra function
rp = rbind(CBT = c(0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.001500, 0.088025, 0.910475),
           IPT = c(0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.176975, 0.748300, 0.074725),
           PDT = c(0.000000, 0.000000, 0.000250, 0.021725, 0.976525, 0.001500, 0.000000, 0.000000),
           PLA = c(0.003350, 0.546075, 0.266125, 0.182125, 0.002325, 0.000000, 0.000000, 0.000000),
           PST = c(0.000000, 0.000000, 0.000000, 0.000000, 0.001500, 0.820025, 0.163675, 0.014800),
           SUP = c(0.000000, 0.217450, 0.403950, 0.378000, 0.000600, 0.000000, 0.000000, 0.000000),
           TAU = c(0.000225, 0.232900, 0.329675, 0.418150, 0.019050, 0.000000, 0.000000, 0.000000),
           WLC = c(0.996425, 0.003575, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000))

sucra(rp, lower.is.better = TRUE)
plot(sucra(rp, lower.is.better = TRUE))
</pre>

<hr /><div style="text-align: center;">[Package <em>dmetar</em> version 0.0.9000 <a href="00Index.html">Index</a>]</div>
</div></body></html>
